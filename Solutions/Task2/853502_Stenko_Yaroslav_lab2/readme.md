# Лабораторная работа №2
Python >= 3.7

## Установка и запуск

Установка: pip install . в директории с файлом setup.py

Задания запускаются с помощью команды:python -m main [номер задания]

Для запуска тестов нужно зайти в папку tests и прописать команду:python -m unittest discover

Чтобы посмотреть степень покрытия кода тестами нужно в папке tests прописать команду:coverage report

### Описание модулей

1. Внешняя сортировка слияниями

Создаётся файл на миллион чисел. Далее он разбивается на 10 файлов, в каждом по 100 000 чисел с помощью функции split_file. В функции считываются числа из "большого" файла и записываются в список temp_buffer. При достижении размера равного 100 000 список сортируется с помощью встроенного метода sort() и числа из него записываются во временный файл. Так происходит до того, пока все числа из большого файла не будут считаны. Для сортировки маленьких файлов в один отсортированный используется один из алгоритмов группы k - way merge, а именно задача решается с помощью минимальной кучи. Алгоритм состоит в том, что из каждого файла, считывается первое число и заноситься в кучу. Т.к. все файлы отсортированные, то это будут минимальные элементы из каждого файла и т.к. это минимальная куча, то самый маленький элемент будет стоят в корне этой кучи. Для реализации данного алгоритма был создан класс HeapNode, содержащий указатель на текущий элемент файла и файл, в котором лежит это число. Если числа из файла закончились, то мы на место узла в куче устанавливаем значение MAX.В итоге в цикле мы создаём минимальную кучу из первых элементов каждого файла и далее заносим значение, которое лежит в корне данной кучи в остсортированный файл и продолжаем добавлять числа в кучу и упорядочивать её с помощью метода heapify(). Таким образом у нас получается на выходе файл с отсортированными числами.   

2. Свой преобразовыватель to_json()

Функция to_json(object) принимает Python объект и преобразовывает его в json-строку. Для этого в цикле проверяется тип объекта и в зависимости от этого возращается соответствующая строка.

3. Класс n-мерный вектор

Для выполнения этого задания были переопределены следующие методы: __repr__, __mul__, __sub__, __add__, __eq__, __len__, __getitem__

4. Декоратор cached

Для запоминания аргументов и соответствующего результата в функции cached был создан словарь, который в ключе хранит передавамые аргументы, а в значении результат функции с этими аргументами. Таким образом, при каждом вызове кэшируемой функции проверяется совпадают ли переданные аргументы, с теми, которые уже записаны, и на основе этого возвращается либо сохранённое значение функции с этими аргументами или функция вызывается с новыми аргументами

5. Свой преобразовыватель из json

Функция from_json(json) принимает json строку и разбивает её на список отдельных строк с помощью регулярных выражений, для удобства её дальнейшего форматирования. После форматирования строки с помощью регулярных выражений в списке останутся только строки, которые были в ключах и значениях изначальной json строки, а так же элементы, позволяющие определить, к какому объекту относиться значение или ключ исходной json строки (например, относится ли к словарю с помощью символа '{' или к списку с помощью символа '['). Далее мы итерируемся по каждому значению, лежащему в списке и возвращаем соответствующие python-объекты.

6. Класс Singleton

Переопределён метод __call__. В instance записывается первый и единственный экземпляр класса.